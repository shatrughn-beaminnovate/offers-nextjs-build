(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[810],{8120:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard/web-to-lead",function(){return a(8376)}])},8376:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var s=a(5893),r=a(5902),n=a(7294);a(1163);let l=e=>new Date(e).toLocaleString("en-US",{month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0});var o=a(1664),c=a.n(o),i=a(843),d=a(9008),x=a.n(d),u=a(9412),m=a(9134),p=a(7957),h=a(4709),g=a(4150),f=a(6597),b=a(6476);a(6455);var y=()=>{let[e,t]=(0,n.useState)([]),[a,o]=(0,n.useState)(1),[d,y]=(0,n.useState)(1),[j,w]=(0,n.useState)(!0),[N,v]=(0,n.useState)(""),[C,_]=(0,n.useState)(""),[S,k]=(0,n.useState)(""),[T,A]=(0,n.useState)(!1),[E,q]=(0,n.useState)(""),{isOpen:O,onOpen:F,onClose:L,onOpenChange:P}=(0,p.q)(),D=async()=>{w(!0);try{let e=await fetch("".concat("https://lmsservice.unicornstore.in","/get-all-meta-forms/?page=").concat(a,"&per_page=10&sort_desc=false"));if(!e.ok)throw Error("Could not get forms");let s=await e.json();t(s.data),y(Math.ceil(s.total_count/10)),s.status}catch(e){console.log(e),m.Am.error(e.message)}setTimeout(()=>{w(!1)},300)},I=async e=>{let{protocol:t,hostname:a,port:s}=window.location;if(!/^([^=&]+=[^=&]+)(&[^=&]+=[^=&]+)*$/.test(S)){A("Slug must be in 'key=value' format.");return}let r="".concat(t,"//").concat(a).concat(s?":".concat(s):"","/upgrade/").concat(e,"?").concat(S).split(" ").join("");if(navigator.clipboard&&"function"==typeof navigator.clipboard.writeText)navigator.clipboard.writeText(r).then(()=>{A("Copied!"),setTimeout(()=>A(!1),2e3)},()=>{console.error("Failed to copy the text.")});else{let e=document.createElement("textarea");e.value=r,document.body.appendChild(e),e.select();try{document.execCommand("copy"),A("Copied!"),setTimeout(()=>A(!1),2e3)}catch(e){console.error("Failed to copy: ",e),m.Am.warn(e.message,{toastId:"errorToast"})}finally{document.body.removeChild(e)}}};return(0,n.useEffect)(()=>{D()},[a]),(0,n.useEffect)(()=>{let{protocol:e,hostname:t,port:a}=window.location;_("".concat(e,"//").concat(t).concat(a?":".concat(a):""))},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x(),{children:(0,s.jsx)("title",{children:"Offer Unicorn | Web To Lead"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-center mb-5",children:"Web to Lead"}),(0,s.jsx)("div",{className:"flex justify-start mb-5",children:(0,s.jsx)(u.A,{color:"success",as:c(),href:"page",className:"text-white font-semibold rounded",children:"Create New Page"})}),(0,s.jsxs)("div",{className:"bg-white shadow-md rounded overflow-x-auto",children:[(0,s.jsxs)("table",{className:"min-w-full table-auto",children:[(0,s.jsx)("thead",{className:"bg-gray-200 ",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-sm font-semibold text-gray-700 uppercase text-center",children:"ID"}),(0,s.jsx)("th",{className:"px-6 py-3 text-sm font-semibold text-gray-700 uppercase text-center",children:"Page Title"}),(0,s.jsx)("th",{className:"px-6 py-3 text-sm font-semibold text-gray-700 uppercase text-center",children:"Slug"}),(0,s.jsx)("th",{className:"px-6 py-3 text-sm font-semibold text-gray-700 uppercase text-center",children:"CreateD At"}),(0,s.jsx)("th",{className:"px-6 py-3 text-sm font-semibold text-gray-700 uppercase text-center",children:"Upated At"}),(0,s.jsx)("th",{className:"px-6 py-3 text-sm font-semibold text-gray-700 uppercase text-center",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 font-medium",children:j?Array(10).fill(0).map((e,t)=>(0,s.jsx)("tr",{className:"divide-x",children:Array(6).fill(0).map((e,t)=>(0,s.jsx)("td",{className:"px-6 py-5",children:(0,s.jsx)(i.X,{className:"h-5 rounded-full"})},t))},t)):e&&e.length>0?null==e?void 0:e.map((e,t)=>(0,s.jsxs)("tr",{className:"divide-x",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:e.id}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:e.product_title}),(0,s.jsx)("td",{className:"px-3 h-full whitespace-nowrap text-sm text-gray-900 text-center",children:(0,s.jsxs)("div",{className:" flex justify-between items-center gap-x-3 w-full",children:[(0,s.jsx)("span",{className:"w-full text-center",children:e.slug}),(0,s.jsx)("button",{className:"!transition-all bg-accent-dimmed accent hover:text-white hover:bg-accent px-2.5 py-1.5 rounded ms-2 ring-accent fas fa-question",onClick:()=>{q(e.slug),F()}}),N===e.id&&(0,s.jsx)("div",{className:"fixed top-0 left-0 flex h-screen w-screen backdrop-blur justify-center items-center z-50",children:(0,s.jsxs)("div",{className:"rounded border min-w-[60vw] border-green-300 bg-green-100 py-2 px-2 text-start relative",children:[(0,s.jsx)("button",{className:"absolute right-4 top-0 text-red-500 bg-red-100 font-bold hover:bg-red-500 hover:text-white transition-colors p-1.5 rounded fas fa-xmark",onClick:()=>{v(""),document.body.classList.remove("overflow-hidden")}}),(0,s.jsx)("span",{className:"font-semibold",children:"Slug: "}),(0,s.jsxs)("span",{children:[C,"/upgrade/",e.slug,"?",S,(0,s.jsxs)("button",{className:"ms-4 text-gray-500 hover:text-gray-800",onClick:()=>I(e.slug),children:[(0,s.jsx)("i",{className:"far fa-copy me-2"}),T]})]}),(0,s.jsx)("div",{className:"relative col-span-2",children:(0,s.jsx)("input",{type:"text",value:S,onChange:e=>k(e.target.value.split(" ").join("")),className:"border px-3 py-2 rounded w-full outline-none transition-all duration-200",placeholder:"query"})})]})})]})}),(0,s.jsx)("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:l(e.created_at)}),(0,s.jsx)("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:l(e.updated_at)}),(0,s.jsxs)("td",{className:" py-4 whitespace-nowrap text-sm flex justify-center gap-x-4",children:[(0,s.jsx)(c(),{href:"/upgrade/".concat(e.slug),target:"_blank",className:"!transition-all text-blue-500 bg-blue-100 hover:bg-blue-500 hover:text-white ring-custom ring-blue-500 p-2 rounded font-semibold fas fa-eye"}),(0,s.jsx)(c(),{href:"page/".concat(e.id),className:"!transition-all text-orange-500 bg-orange-100 hover:bg-orange-400 hover:text-white ring-custom ring-orange-400 p-2 rounded font-semibold fas fa-pen-to-square"})]})]},t)):(0,s.jsx)("tr",{className:"divide-x",children:(0,s.jsx)("td",{colSpan:6,className:"border m-1 p-3 text-red-500 text-center",children:"Something went wrong"})})})]}),d>1&&(0,s.jsx)(r.g,{showControls:!0,total:d,color:"success",classNames:{cursor:"text-white"},page:a,onChange:o})]}),(0,s.jsx)(h.R,{isOpen:O,onOpenChange:P,classNames:{base:"min-w-[60vw] border-green-600 bg-green-100 rounded-lg border",closeButton:"bg-red-100 text-red-500 hover:bg-red-500 hover:text-white transition-all",footer:"py-2",body:"gap-1"},onClose:()=>k(""),children:(0,s.jsx)(g.A,{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(f.I,{children:[(0,s.jsx)("p",{className:"font-semibold",children:"Slug: "}),(0,s.jsxs)("div",{children:[C,"/upgrade/",E,"?",S,(0,s.jsxs)("button",{className:"ms-4 text-gray-500 hover:text-gray-800",onClick:()=>I(E),children:[(0,s.jsx)("i",{className:"far fa-copy me-2"}),T]})]}),(0,s.jsx)("div",{className:"relative col-span-2",children:(0,s.jsx)("input",{type:"text",value:S,onChange:e=>k(e.target.value.split(" ").join("")),className:"border px-3 py-2 rounded w-full outline-none transition-all duration-200",placeholder:"query"})})]}),(0,s.jsx)(b.R,{})]})})})]})}}},function(e){e.O(0,[166,142,741,321,888,774,179],function(){return e(e.s=8120)}),_N_E=e.O()}]);