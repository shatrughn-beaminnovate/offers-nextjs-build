(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72],{6889:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard/forms-submitted",function(){return a(5662)}])},5662:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var s=a(5893),r=a(7294),n=a(9412),o=a(843),l=a(9008),i=a.n(l),c=a(9134),d=()=>{let e="https://lmsservice.unicornstore.in",[t,a]=(0,r.useState)(""),[l,d]=(0,r.useState)([]),[m,u]=(0,r.useState)(1),[x,p]=(0,r.useState)(0),[f,h]=(0,r.useState)(!0),b=async()=>{try{h(!0);let a=await fetch("".concat(e,"/get-all-submission-forms/?page=").concat(m,"&per_page=10&sort_desc=false&search=").concat(t));if(!a.ok)throw Error("Could not get form submissions");let s=await a.json();s.status,d(s.data),p(Math.ceil(s.total_count/10))}catch(e){console.log(e),c.Am.error(e.message)}finally{setTimeout(()=>{h(!1)},300)}};(0,r.useEffect)(()=>{b()},[m]),(0,r.useEffect)(()=>{let e=setTimeout(()=>b(),300);return()=>clearTimeout(e)},[t]);let y=async()=>{try{let t=await fetch("".concat(e,"/generate-excel/?page=1&per_page=10000"),{method:"GET"});if(!t.ok)throw Error("Could not download file");let a=await t.blob(),s=window.URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.setAttribute("download","users-data.xlsx"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(s)}catch(e){c.Am.error(e.message,{toastId:"formSubmittedExcelErrorToast"})}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i(),{children:(0,s.jsx)("title",{children:"Offer Unicorn | Users Data"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-center mb-5",children:"Users Data"}),(0,s.jsxs)("div",{className:"flex justify-between mb-5 gap-x-4",children:[(0,s.jsx)("div",{className:"relative flex-grow",children:(0,s.jsx)("input",{type:"text",value:t,onChange:e=>a(e.target.value),className:"border px-4 py-2 rounded w-full border-gray-300 ring-border h-full ",placeholder:"Search by ID, Name, Email, Phone no, Slug, Product or Store"})}),(0,s.jsx)(n.A,{color:"success",className:"text-white ring-accent rounded",onClick:y,startContent:(0,s.jsx)("i",{className:"fas fa-download"}),children:"Export to excel"})]}),(0,s.jsx)("div",{className:"bg-white shadow-md rounded relative overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full table-auto shadow-lg rounded-lg overflow-hidden",children:[(0,s.jsx)("thead",{className:"bg-gray-200",children:(0,s.jsxs)("tr",{className:"",children:[(0,s.jsx)("th",{className:"px-6 py-3 text-sm font-semibold uppercase text-center",children:"ID"}),(0,s.jsx)("th",{className:"px-6 py-3 text-sm font-semibold uppercase text-center",children:"Name"}),(0,s.jsx)("th",{className:"px-6 py-3 text-sm font-semibold uppercase text-center",children:"Email"}),(0,s.jsx)("th",{className:"px-6 py-3 text-sm font-semibold uppercase text-center",children:"Phone No"}),(0,s.jsx)("th",{className:"px-6 py-3 text-sm font-semibold uppercase text-center",children:"Slug"}),(0,s.jsx)("th",{className:"px-2 py-3 text-sm font-semibold uppercase text-center",children:"Product"}),(0,s.jsx)("th",{className:"px-6 py-3 text-sm font-semibold uppercase text-center",children:"Store"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f?Array(10).fill(0).map((e,t)=>(0,s.jsx)("tr",{className:"divide-x",children:Array(7).fill(0).map((e,t)=>(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)(o.X,{className:"h-5 rounded-full"})},t))},t)):l&&l.length>0?null==l?void 0:l.map((e,t)=>(0,s.jsxs)("tr",{className:"divide-x",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-center",children:e.form_id}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-center",children:e.name}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-center",children:e.email}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-center",children:e.phone}),(0,s.jsx)("td",{className:"px-2 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-center",children:(0,s.jsx)("div",{className:"flex flex-col w-full items-center justify-center",children:Object.entries(e.url_data).filter(e=>{let[t]=e;return"phoneID"!==t}).length>0?Object.entries(e.url_data).filter(e=>{let[t]=e;return"phoneID"!==t}).map(e=>{let[t,a]=e;return(0,s.jsxs)("tr",{className:"w-fit flex justify-center",children:[(0,s.jsxs)("td",{className:"px-1 whitespace-nowrap text-sm font-medium text-gray-900 justify-self-end",children:[t,":"]}),(0,s.jsx)("td",{className:"px-1 whitespace-nowrap text-sm text-gray-500 justify-self-start",children:a})]},t)}):"-"})}),(0,s.jsx)("td",{className:"px-3 py-4 text-sm font-medium text-gray-900 text-center",children:e.device_variant||"-"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-center",children:e.store_name})]},t)):(0,s.jsx)("tr",{className:"divide-x",children:(0,s.jsx)("td",{colSpan:7,className:"border m-1 p-3 text-red-500 text-center",children:"No results found, please refine your search query"})})})]})}),x>1&&(0,s.jsx)(Pagination,{showControls:!0,total:x,color:"success",classNames:{cursor:"text-white"},page:m,onChange:u})]})}},9008:function(e,t,a){e.exports=a(7828)},843:function(e,t,a){"use strict";a.d(t,{X:function(){return u}});var s=a(5607),r=(0,a(9488).tv)({slots:{base:["group","relative","overflow-hidden","bg-content3 dark:bg-content2","pointer-events-none","before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2","data-[loaded=true]:pointer-events-auto","data-[loaded=true]:overflow-visible","data-[loaded=true]:!bg-transparent","data-[loaded=true]:before:opacity-0 data-[loaded=true]:before:-z-10 data-[loaded=true]:before:animate-none","data-[loaded=true]:after:opacity-0"],content:["opacity-0","group-data-[loaded=true]:opacity-100"]},variants:{disableAnimation:{true:{base:"before:animate-none before:transition-none after:transition-none",content:"transition-none"},false:{base:"transition-background !duration-300",content:"transition-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{}}),n=a(9037),o=a(9869),l=a(262),i=a(7294),c=a(6733),d=a(5893),m=(0,s.Gp)((e,t)=>{let{Component:a,children:m,getSkeletonProps:u,getContentProps:x}=function(e){var t,a;let d=(0,c.w)(),[m,u]=(0,s.oe)(e,r.variantKeys),{as:x,children:p,isLoaded:f=!1,className:h,classNames:b,...y}=m,g=null!=(a=null!=(t=e.disableAnimation)?t:null==d?void 0:d.disableAnimation)&&a,w=(0,i.useMemo)(()=>r({...u,disableAnimation:g}),[(0,n.Xx)(u),g,p]),j=(0,o.W)(null==b?void 0:b.base,h);return{Component:x||"div",children:p,slots:w,classNames:b,getSkeletonProps:(e={})=>({"data-loaded":(0,l.PB)(f),className:w.base({class:(0,o.W)(j,null==e?void 0:e.className)}),...y}),getContentProps:(e={})=>({className:w.content({class:(0,o.W)(null==b?void 0:b.content,null==e?void 0:e.className)})})}}({...e});return(0,d.jsx)(a,{ref:t,...u(),children:(0,d.jsx)("div",{...x(),children:m})})});m.displayName="NextUI.Skeleton";var u=m}},function(e){e.O(0,[888,774,179],function(){return e(e.s=6889)}),_N_E=e.O()}]);