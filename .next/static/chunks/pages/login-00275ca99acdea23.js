(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{2070:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(1796)}])},1796:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return m}});var t=r(5893),a=r(7294),n=r(9412),o=r(9008),l=r.n(o),d=r(1163),i=r(9134),c=()=>{let[e,s]=(0,a.useState)({username:"jishan@beam.in",password:"password"}),[r,o]=(0,a.useState)({username:"",password:""}),[l,c]=(0,a.useState)(!0),[m,u]=(0,a.useState)(""),[p,b]=(0,a.useState)(!1),g=(0,d.useRouter)();(0,a.useEffect)(()=>{let e=localStorage.getItem("token"),s=localStorage.getItem("name");e&&s&&g.replace("/")},[g]);let h=r=>{let{name:t,value:a}=r.target;s({...e,[t]:a}),o(e=>{let s={...e};return"username"===t&&(a.trim()?s.username="":s.username="Username is required"),"password"===t&&(a.trim()?s.password="":s.password="Password is required"),s})},w=()=>{let s={};return e.username.trim()||(s.username="Username is required"),e.password.trim()||(s.password="Password is required"),o(s),0===Object.keys(s).length},x=async s=>{if(s.preventDefault(),w())try{b(!0),u(null);let s=new FormData;s.append("username",e.username),s.append("password",e.password);let r=await fetch("".concat("https://lmsservice.unicornstore.in","/staff/token"),{method:"POST",body:s});if(!r.ok)throw Error("Could not get token");let t=await r.json();localStorage.setItem("token",t.access_token),localStorage.setItem("name",t.name),g.replace("/admin/dashboard")}catch(e){console.error(e.message),u("Something went wrong: ".concat(e.message)),i.Am.error(e.message)}finally{b(!1)}};return(0,t.jsx)("div",{className:"flex items-center justify-center py-20 bg-white",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:"Store Login"}),(0,t.jsxs)("form",{onSubmit:e=>x(e),children:[(0,t.jsxs)("div",{className:"mb-6 relative",children:[(0,t.jsx)("label",{htmlFor:"username",className:"block text-gray-700 mb-0.5",children:"Username or Email Address"}),(0,t.jsx)("input",{type:"text",id:"username",name:"username",value:e.username,onChange:e=>h(e),className:"w-full p-3 border border-gray-300 rounded-lg  ring-border ".concat(r.username?"border-red-300":""),placeholder:"Enter username or email",autoComplete:"email"}),r.username&&(0,t.jsx)("span",{className:"text-red-500 text-xs absolute left-0 -bottom-5",children:r.username})]}),(0,t.jsxs)("div",{className:"mb-6 relative",children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-gray-700 mb-0.5",children:"Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:l?"text":"password",id:"password",name:"password",value:e.password,onChange:e=>h(e),className:"w-full p-3 border border-gray-300 rounded-lg ring-border ".concat(r.password?"border-red-300":""),placeholder:"Enter password",autoComplete:"current-password"}),(0,t.jsx)("button",{type:"button",tabIndex:0,className:"absolute inset-y-0 text-gray-500 cursor-pointer content-center right-0 px-3 rounded-e-lg hover:bg-gray-100 hover:bg-opacity-50 focus:bg-gray-200 focus:bg-opacity-50 outline-none",onClick:()=>{c(e=>!e)},children:(0,t.jsx)("i",{className:"bi ".concat(l?"bi-eye-slash":"bi-eye")})})]}),r.password&&(0,t.jsx)("span",{className:"text-red-500 text-xs absolute left-0 -bottom-5",children:r.password})]}),m&&(0,t.jsx)("p",{className:"text-red-500 text-sm mb-4",children:m}),(0,t.jsx)(n.A,{isLoading:p,type:"submit",className:"w-full bg-accent text-white p-3 rounded-lg",children:"Login"})]})]})})},m=()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l(),{children:(0,t.jsx)("title",{children:"Offer Unicorn - Login"})}),(0,t.jsx)(c,{})]})},9008:function(e,s,r){e.exports=r(7828)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=2070)}),_N_E=e.O()}]);